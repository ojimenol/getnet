openapi: 3.0.3
info:
  title: Merchant Portal (Converted from Postman)
  version: "1.0.0"

servers:
  - url: https://srvnuarintra.santander.pru.bsch
  - url: https://repgtnprep.minsaitpaymentsprocessing.com

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer

  schemas:
    CredentialsRequest:
      type: object
      properties:
        idAttributes:
          type: object
          properties:
            uid:
              type: string
        password:
          type: string
        realm:
          type: string
      required: [idAttributes, password, realm]

    JWEGenerateRequest:
      type: object
      properties:
        keyalias:
          type: string
        expiration:
          type: string
        payload:
          type: object
      required: [keyalias, expiration, payload]


paths:

  ###########################################################
  ## SAS CREDENTIALS / TOKEN LOGIN
  ###########################################################
  /sas/authenticate/credentials:
    post:
      operationId: getSASTokens
      summary: Get SAS Credentials Token (JWT & tokenCorp)
      tags: [Nuek]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CredentialsRequest"
      responses:
        "200":
          description: Authentication successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  tokenCorp:
                    type: string
                  jwt:
                    type: string

  ###########################################################
  ## GENERATE JWE TOKENS
  ###########################################################
  /cos/jwe/scos/generate:
    post:
      operationId: postJWEGenerateToken
      summary: Generate JWE Token
      tags: [Nuek]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/JWEGenerateRequest"
      responses:
        "200":
          description: JWE token returned
          content:
            application/json:
              schema:
                type: object
                properties:
                  jwe:
                    type: string


  ###########################################################
  ## 1. NUek Comercios
  ###########################################################
  /api/Comercios/commerces:
    get:
      operationId: getComercios
      summary: NUek – Comercios
      tags: [Nuek]
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: personCode
          schema: { type: string }
        - in: query
          name: personType
          schema: { type: string }
        - in: query
          name: billingDateFrom
          schema: { type: string }
        - in: query
          name: billingDateTo
          schema: { type: string }
        - in: query
          name: listDateFrom
          schema: { type: string }
        - in: query
          name: listDateTo
          schema: { type: string }
        - in: query
          name: order
          schema: { type: string }
      responses:
        "200":
          description: OK

  ###########################################################
  ## 2. NUek Grouped Billing
  ###########################################################
  /api/Comercios/groupedbilling:
    get:
      operationId: getComerciosGroupedBilling
      summary: NUek – Grouped Billing
      tags: [Nuek]
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: personCode
          schema: { type: string }
        - in: query
          name: personType
          schema: { type: string }
        - in: query
          name: listDateFrom
          schema: { type: string }
        - in: query
          name: listDateTo
          schema: { type: string }
        - in: query
          name: order
          schema: { type: string }
      responses:
        "200":
          description: OK

  ###########################################################
  ## 3. NUek TPVs
  ###########################################################
  /api/Comercio/tpvs:
    get:
      operationId: getComercioTpvs
      summary: NUek – Comercios TPVs
      tags: [Nuek]
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: personType
          schema: { type: string }
        - in: query
          name: personCode
          schema: { type: string }
        - in: query
          name: commerceCode
          schema: { type: string }
        - in: query
          name: billingDateFrom
          schema: { type: string }
        - in: query
          name: billingDateTo
          schema: { type: string }
        - in: query
          name: listDateFrom
          schema: { type: string }
        - in: query
          name: listDateTo
          schema: { type: string }
        - in: query
          name: order
          schema: { type: string }
      responses:
        "200":
          description: OK


  ###########################################################
  ## 4. NUek Operaciones TPV
  ###########################################################
  /api/TPV/tpv_clearance:
    get:
      operationId: getTpvOperations
      summary: NUek – TPV Operations
      tags: [Nuek]
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: commerceContract
          schema: { type: string }
        - in: query
          name: order
          schema: { type: string }
        - in: query
          name: dateFrom
          schema: { type: string }
        - in: query
          name: dateTo
          schema: { type: string }
      responses:
        "200":
          description: OK

  ###########################################################
  ## 5. NUek – Transacciones TPV
  ###########################################################
  /api/CierreCaja/clearance_operations:
    get:
      operationId: getTpvTansactions
      summary: NUek – TPV Transactions
      tags: [Nuek]
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: commerceContract
          schema: { type: string }
        - in: query
          name: valueDate
          schema: { type: string }
        - in: query
          name: totalDate
          schema: { type: string }
        - in: query
          name: totalOrder
          schema: { type: string }
      responses:
        "200":
          description: OK
